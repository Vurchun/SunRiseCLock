var fuga={id:0,fk:'_fuga',uid:'',sid:'',purl:'',init(){try{let obj=document.querySelector('#fuga')
this.id=parseInt(obj.dataset.id)
this.uid=this.genUID()
this.sid=this.genSID()
this.purl=new URL(obj.src).origin+'/'}catch(e){console.log(e)}},genUID(){let uid=localStorage.getItem(this.fk)
if(uid){return uid}else{let d=new Date().getTime();let d2=((typeof performance!=='undefined')&&performance.now&&(performance.now()*1000))||0;let uid='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16;if(d>0){r=(d+r)%16|0;d=Math.floor(d/16);}else{r=(d2+r)%16|0;d2=Math.floor(d2/16);}
return(c==='x'?r:(r&0x3|0x8)).toString(16);});localStorage.setItem(this.fk,uid)
return uid}},genSID(){let sid=sessionStorage.getItem(this.fk)
let newsid=new Date().getTime();if(sid&((newsid-sid)<60000)){return sid}else{let sid=newsid;sessionStorage.setItem(this.fk,sid)
return sid.toString()}},async postData(url='',data={}){try{const response=await fetch(url,{method:'POST',mode:'cors',cache:'no-cache',credentials:'same-origin',headers:{'Content-Type':'application/json'},redirect:'follow',referrerPolicy:'no-referrer',body:JSON.stringify(data)});}catch(e){console.log(e)}},send(){if(this.purl!=''){try{let st={userid:this.id,uid:this.uid,sid:this.sid,url:document.URL,referrer:document.referrer,agent:window.navigator.userAgent,language:window.navigator.language,mobile:window.matchMedia("(pointer:coarse)").matches,screenw:window.screen.width,screenh:window.screen.height}
this.postData(this.purl,st)}catch(e){console.log(e)}}}}
fuga.init()
fuga.send()